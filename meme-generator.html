<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ULTRA MEME 2026 — З прийдешнім!</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0a001f;color:#e0f8ff;font-family:system-ui,sans-serif;min-height:100vh;overflow-x:hidden;position:relative}
.snow{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9998}
.snowflake{position:absolute;color:#e0f8ff;font-size:20px;opacity:.9;animation:fall linear infinite;user-select:none}
@keyframes fall{0%{transform:translateY(-100vh) rotate(0deg)}100%{transform:translateY(100vh) rotate(360deg)}}
.tree{position:fixed;bottom:0;width:200px;height:400px;pointer-events:none;z-index:1;background:radial-gradient(circle at 50% 0%,#0f0,#060);clip-path:polygon(50% 0%,0% 100%,100% 100%);filter:drop-shadow(0 0 30px #0f0)}
.tree.left{left:0;transform:scaleX(-1)}.tree.right{right:0}
header{text-align:center;padding:80px 20px 20px;position:relative;z-index:10}
.santa-hat{position:absolute;top:-100px;left:50%;transform:translateX(-50%);width:320px;height:320px;z-index:11;background:radial-gradient(circle at 40% 30%,#ff0000,#c00);clip-path:polygon(50% 0%,0% 100%,100% 100%);border-radius:50% 50% 50% 50%/60% 60% 40% 40%;box-shadow:0 20px 40px rgba(0,0,0,.6)}
.santa-hat::before{content:'';position:absolute;bottom:-40px;left:50%;transform:translateX(-50%);width:120px;height:120px;background:#fff;border-radius:50%;box-shadow:inset 0 10px 20px rgba(0,0,0,.3)}
.santa-hat::after{content:'';position:absolute;bottom:-60px;left:50%;transform:translateX(-50%);width:160px;height:40px;background:#ff006e;border-radius:20px}
h1{font-size:clamp(4.5rem,14vw,11rem);background:linear-gradient(90deg,#ff006e,#ffd700,#00ff88,#00d0ff);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 50px #ff006e,0 0 100px #ffd700;animation:g 3s infinite alternate}
@keyframes g{from{filter:drop-shadow(0 0 30px #ff006e)}to{filter:drop-shadow(0 0 80px #ffd700)}}
.top-menu{position:fixed;top:20px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.7);padding:12px 30px;border-radius:50px;backdrop-filter:blur(20px);border:2px solid rgba(255,215,0,.5);display:flex;gap:30px;z-index:9999;align-items:center}
.top-btn,.lang-btn{background:transparent;color:#e0f8ff;border:none;font-size:1.3rem;font-weight:700;cursor:pointer;padding:10px 20px;border-radius:30px;transition:.4s}
.top-btn:hover,.top-btn.active,.lang-btn:hover,.lang-btn.active{background:rgba(255,215,0,.3);color:#ffd700}
.overlay{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.95);padding:40px;border-radius:40px;max-width:90%;max-height:90vh;overflow-y:auto;z-index:99999;border:3px solid #ffd700;box-shadow:0 0 100px #ff006e;display:none;backdrop-filter:blur(20px);width:800px}
.overlay.active{display:block}
.close-btn{position:absolute;top:20px;right:30px;background:#ff006e;color:#fff;border:none;padding:15px 25px;border-radius:50px;font-size:1.8rem;cursor:pointer}
#meme-canvas{max-width:100%;border-radius:40px;box-shadow:0 30px 100px rgba(255,0,110,.6),0 0 80px rgba(255,215,0,.4);border:3px solid #ffd700;display:block;margin:40px auto;position:relative;cursor:move}
.controls{background:#1a0033;border-radius:40px;padding:40px;margin:60px 20px;max-width:1400px;box-shadow:0 30px 120px rgba(0,0,0,.8);border:2px solid rgba(255,215,0,.3);display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:30px}
input,select,button{padding:20px;border-radius:24px;border:none;font-size:1.3rem;background:rgba(255,255,255,.1);color:#e0f8ff;box-shadow:0 10px 30px rgba(0,0,0,.5)}
button{background:linear-gradient(45deg,#ff006e,#ffd700);color:#fff;font-weight:900;cursor:pointer}
.templates-grid{display:flex;gap:32px;overflow-x:auto;padding:30px 0}
.template-card{min-width:380px;height:380px;border-radius:40px;overflow:hidden;box-shadow:0 30px 100px rgba(255,0,110,.6);cursor:pointer;transition:all .6s;position:relative;border:3px solid rgba(255,215,0,.4)}
.template-card:hover{transform:scale(1.12);box-shadow:0 50px 150px rgba(255,215,0,.8)}
</style>
</head>
<body>

<div class="snow" id="snow"></div>
<div class="tree left"></div>
<div class="tree right"></div>

<header>
  <div class="santa-hat"></div>
  <h1 data-lang="title">З прийдешнім 2026 роком!</h1>
</header>

<div class="top-menu">
  <button class="top-btn active" data-lang="generator">ГЕНЕРАТОР</button>
  <button class="top-btn" data-lang="tutorial" onclick="openOverlay('tutorial')">ТУТОРІАЛ</button>
  <button class="top-btn" data-lang="settings" onclick="openOverlay('settings')">НАЛАШТУВАННЯ</button>
  <div style="margin-left:20px;border-left:2px solid #ffd700;padding-left:20px;display:flex;gap:10px">
    <button class="lang-btn active" onclick="setLang('ua')">UA</button>
    <button class="lang-btn" onclick="setLang('ru')">RU</button>
    <button class="lang-btn" onclick="setLang('en')">EN</button>
  </div>
</div>

<div class="overlay" id="tutorial">
  <button class="close-btn" onclick="closeOverlay('tutorial')">×</button>
  <h2 data-lang="howto">Як створити мем</h2>
  <ol data-lang="steps">
    <li>Клікни на шаблон</li>
    <li>Введи текст</li>
    <li>Перетягни текст мишкою</li>
    <li>Натисни «СКАЧАТИ МЕМ»</li>
  </ol>
  <p style="text-align:center;font-size:3rem;color:#ffd700;margin-top:50px" data-lang="happynewyear">З прийдешнім 2026 роком!</p>
</div>

<div class="overlay" id="settings">
  <button class="close-btn" onclick="closeOverlay('settings')">×</button>
  <h2 data-lang="settings">Налаштування</h2>
  <label><input type="checkbox" checked onchange="document.getElementById('snow').style.display=this.checked?'block':'none'"> Сніг</label>
  <label><input type="checkbox" checked onchange="document.querySelectorAll('.tree').forEach(t=>t.style.display=this.checked?'block':'none')"> Ялинки</label>
</div>

<div class="container" id="main">
  <canvas id="meme-canvas" width="1200" height="1200"></canvas>

  <div class="controls">
    <input type="text" id="topText" placeholder="ВЕРХНІЙ ТЕКСТ" value="З ПРИЙДЕШНІМ">
    <input type="text" id="bottomText" placeholder="НИЖНІЙ ТЕКСТ" value="2026 РОКОМ!">
    <select id="fontFamily">
      <option value="Impact">Impact</option>
      <option value="Bebas Neue">Bebas Neue</option>
      <option value="Anton">Anton</option>
      <option value="Bangers">Bangers</option>
      <option value="Mountains of Christmas">Новорічний</option>
    </select>
    <div style="grid-column:1/-1;display:flex;align-items:center;gap:20px">
      <span>Розмір:</span>
      <input type="range" id="fontSize" min="40" max="350" value="160" style="flex:1">
      <span id="sizeValue">160px</span>
    </div>
    <input type="color" id="textColor" value="#ffffff">
    <input type="color" id="strokeColor" value="#000000">
    <input type="range" id="strokeWidth" min="0" max="60" value="20">
    <input type="file" id="imageLoader" accept="image/*">
    <button onclick="downloadMeme()">СКАЧАТИ МЕМ</button>
    <button onclick="randomTemplate()">ВИПАДКОВИЙ</button>
    <button onclick="resetTextPos()">СКИНУТИ ПОЗИЦІЮ</button>
  </div>

  <div class="templates">
    <h2>НАЙКРАЩІ ШАБЛОНИ 2026</h2>
    <div class="templates-grid" id="templatesGrid"></div>
  </div>
</div>

<script>
// СНІГ
for(let i=0;i<120;i++){
  const s=document.createElement('div');s.className='snowflake';
  s.textContent=['❄','❅','❆'][Math.floor(Math.random()*3)];
  s.style.left=Math.random()*100+'vw';
  s.style.animationDuration=8+Math.random()*12+'s';
  s.style.animationDelay=Math.random()*10+'s';
  s.style.fontSize=12+Math.random()*25+'px';
  document.getElementById('snow').appendChild(s);
}

// ШАБЛОНИ
const templates=[
  "Drake","https://i.imgflip.com/1g8my4.jpg",
  "Stonks","https://i.imgflip.com/2g3w9.jpg",
  "Gigachad","https://i.imgflip.com/adx7me.jpg",
  "Woman Yelling at Cat","https://i.imgflip.com/adx7wv.jpg",
  "Ждун","https://i.imgflip.com/3lmzyx.jpg",
  "This Is Fine","https://i.imgflip.com/26jxvz.jpg",
  "Doge","https://i.imgflip.com/4t0m5.jpg"
];

const grid=document.getElementById('templatesGrid');
templates.forEach((name,i)=>{
  if(i%2===0){
    const div=document.createElement('div');div.className='template-card';
    div.innerHTML=`<img src="${templates[i+1]}" loading="lazy"><div class="template-name">${name}</div>`;
    div.onclick=()=>{img.src=templates[i+1];img.onload=draw;};
    grid.appendChild(div);
  }
});

const canvas=document.getElementById('meme-canvas');
const ctx=canvas.getContext('2d');
let img=new Image();img.crossOrigin="anonymous";
img.src='https://i.imgflip.com/4t0m5.jpg';img.onload=draw;

let dragging=null;
let topX=canvas.width/2,topY=canvas.height*0.3;
let bottomX=canvas.width/2,bottomY=canvas.height*0.7;

canvas.addEventListener('mousedown',e=>{
  const rect=canvas.getBoundingClientRect();
  const x=e.clientX-rect.left;
  const y=e.clientY-rect.top;
  const size=parseInt(document.getElementById('fontSize').value);
  ctx.font=`900 ${size}px "${document.getElementById('fontFamily').value}"`;
  const topText=document.getElementById('topText').value.toUpperCase();
  const bottomText=document.getElementById('bottomText').value.toUpperCase();
  const topW=ctx.measureText(topText).width;
  const bottomW=ctx.measureText(bottomText).width;
  if(x>topX-topW/2&&x<topX+topW/2&&y>topY-size&&y<topY+size/2)dragging='top';
  else if(x>bottomX-bottomW/2&&x<bottomX+bottomW/2&&y>bottomY-size&&y<bottomY+size/2)dragging='bottom';
});

canvas.addEventListener('mousemove',e=>{
  if(dragging){
    const rect=canvas.getBoundingClientRect();
    const x=e.clientX-rect.left;
    const y=e.clientY-rect.top;
    if(dragging==='top'){topX=x;topY=y;}
    if(dragging==='bottom'){bottomX=x;bottomY=y;}
    draw();
  }
});

canvas.addEventListener('mouseup',()=>{dragging=null});
canvas.addEventListener('mouseleave',()=>{dragging=null});

function resetTextPos(){
  topX=canvas.width/2;topY=canvas.height*0.3;
  bottomX=canvas.width/2;bottomY=canvas.height*0.7;
  draw();
}

function draw(){
  const top=document.getElementById('topText').value.toUpperCase();
  const bottom=document.getElementById('bottomText').value.toUpperCase();
  const font=document.getElementById('fontFamily').value;
  const size=parseInt(document.getElementById('fontSize').value);
  document.getElementById('sizeValue').textContent=size+'px';

  canvas.width=img.naturalWidth||1200;
  canvas.height=img.naturalHeight||1200;
  ctx.drawImage(img,0,0,canvas.width,canvas.height);

  ctx.font=`900 ${size}px "${font}"`;
  ctx.textAlign='center';ctx.textBaseline='middle';
  const stroke=parseInt(document.getElementById('strokeWidth').value);
  if(stroke>0){
    ctx.lineJoin='round';ctx.lineWidth=stroke*2;
    ctx.strokeStyle=document.getElementById('strokeColor').value;
    ctx.strokeText(top,topX,topY);
    ctx.strokeText(bottom,bottomX,bottomY);
  }
  ctx.fillStyle=document.getElementById('textColor').value;
  ctx.fillText(top,topX,topY);
  ctx.fillText(bottom,bottomX,bottomY);
}

document.querySelectorAll('input,select,#fontSize').forEach(e=>e.addEventListener('input',draw));

document.getElementById('imageLoader').addEventListener('change',e=>{
  if(e.target.files[0]){
    const reader=new FileReader();
    reader.onload=ev=>{img.src=ev.target.result;img.onload=draw;};
    reader.readAsDataURL(e.target.files[0]);
  }
});

function downloadMeme(){
  const a=document.createElement('a');
  a.download='meme-2026.png';
  a.href=canvas.toDataURL();
  a.click();
}

function randomTemplate(){
  const i=Math.floor(Math.random()*(templates.length/2))*2+1;
  img.src=templates[i];
}

function openOverlay(id){
  document.getElementById(id).classList.add('active');
}

function closeOverlay(id){
  document.getElementById(id).classList.remove('active');
}

function showMain(){
  document.getElementById('main').style.display='block';
  document.getElementById('tutorial').classList.remove('active');
  document.getElementById('settings').classList.remove('active');
}

// ПЕРЕВОДЫ — 100% РАБОТАЮТ
const translations={
  ua:{title:"З прийдешнім 2026 роком!",generator:"ГЕНЕРАТОР",tutorial:"ТУТОРІАЛ",settings:"НАЛАШТУВАННЯ"},
  ru:{title:"С наступающим 2026 годом!",generator:"ГЕНЕРАТОР",tutorial:"ТУТОРИАЛ",settings:"НАСТРОЙКИ"},
  en:{title:"Happy 2026!",generator:"GENERATOR",tutorial:"TUTORIAL",settings:"SETTINGS"}
};

function setLang(lang){
  document.querySelectorAll('[data-lang]').forEach(el=>{
    const key=el.getAttribute('data-lang');
    if(translations[lang][key])el.innerHTML=translations[lang][key];
  });
  document.querySelectorAll('.lang-btn').forEach(b=>b.classList.remove('active'));
  document.querySelector(`.lang-btn[onclick="setLang('${lang}')"]`).classList.add('active');
}
setLang('ua');

draw();
</script>
</body>
</html>